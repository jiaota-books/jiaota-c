## 复杂语句

到现在为止，我们能做的事情还不多：

- 可以定义几个变量
- 可以对它们进行加减乘除的运算
- 可以结果打印出来
- 可以把上述的操作包裹成一个函数，这样其他的地方就可以一句话调用了

但现在还是没法做到一些基本的程序功能，例如：

- 对情况进行判断，根据不同的判断条件做不同的事情。
- 重复多次执行某种类似的操作。例如，计算1到10的和，我们可以写十条加法语句，但要计算1到1亿的和，就无能为力了。
- 与用户进行基本的交互，并根据不同的输入做出不同的反应。例如：一个计算器。这需要前面两条功能的支持。

本章就介绍几个复杂语句来解决这些问题。

## 条件语句

首先我们要能够判断不同的情况。

例如：如果用户给的是`1 + 1`，我们判断出计算符号是`+`加号，就用加法来计算；如果给的是 `1 - 1`，我们判断出计算符号是`-`减号，就用减法来计算。

### 简单条件

在C语言里，我们用条件语句（即`if`语句）来实现这个功能。

```c
if (条件) {
    // 条件成立时，执行这个分支的语句 
} else {
    // 条件不成立时，执行这个分支的语句
}
```

例如，加入用户输入的符号放在变量`op`里，我们可以这样写：

```c
int a = 10;
int b = 5;
if (op == '+') {
    printf("%d\n", a + b);
} else {
    printf("%d\n", a - b);
}
```

这里的条件是`op == '+'`。C语言里用`==`来判断两个变量是否相等，如果相等就返回`1`，否则返回`0`。
而`if`的条件成立的条件就是这个条件的值不为`0`；如果为`0`，就不成立。

为什么用`==`而不是`=`呢？因为`=`已经被用作赋值操作了，这里如果写成`op = '+'`，那么实际的结果是`op`变成了`'+'`，即使它本身是`'-'`。
为了避免这样的歧义，C语言用`==`来表示判断是否相等的操作。

注意：但可惜C并没有禁止在条件语句里写`=`，所以我们在写条件语句的时候，要特别注意，不要把`==`写成了`=`。
这也是C程序里经常出错的地方之一，以至于有专门的检查工具去检查这一种错误（C语言还有其他不少因为规范太宽松而容易导致的错误，后来的语言引以为戒，添加了很多规范。例如，Java就不允许在条件里使用`=`）。

类似的比较符号还有：

- `!=` 不等于
- `>` 大于
- `<` 小于
- `>=` 大于等于
- `<=` 小于等于

这些符号和数学符号基本一致。

### 多重条件

上面的例子可以正确地判断`+`和`-`，但如果用户输入的是`*`或`/`呢？我们的程序仍然会进入到`else`分支里，最后返回了`a-b`，而这显然是不对的。

我们需要能判断更多条件的办法。其实很简单，在`else`后面再添加`if`判断即可： 

```c
int a = 10;
int b = 5;
if (op == '+') {
    printf("%d\n", a + b);
} else if (op == '-') {
    printf("%d\n", a - b);
} else if (op == '*') {
    printf("%d\n", a * b);
} else if (op == '/') {
    printf("%d\n", a / b);
} else {
    printf("unknown operator\n");
}
```

只要你愿意，可以添加更多的`else if`。

我猜C编译器并没有单独去设计一个`else if`语法，而是利用了这样一个简化规则：`如果if或else分支里的语句只有一句话，那么可以省略掉花括号`。

也就是说，最上面的例子可以简写成：

```c
if (op == '+') printf("%d\n", a + b);
else printf("%d\n", a - b);
```

然后我们想在`else`分支里再判断是`-`还是`*`，就可以这样写：

```c
if (op == '+') printf("%d\n", a + b);
else {
    if (op == '-') printf("%d\n", a - b);
    else printf("%d\n", a * b);
}
```

用里头的一个`if-else`语句替代`printf`语句。此时由于一个`if-else`就是单个语句，所以花括号可以省略：

```c
if (op == '+') printf("%d\n", a + b);
else if (op == '-') printf("%d\n", a - b);
else printf("%d\n", a * b);
```

这样`else if`就出现了。

同理，再加上的`else if`其实也是在`else`分支里的再次条件判断而已。

如果不省略花括号，那么上面的例子写出来还是很麻烦的：

```c
if (op == '+') {
    printf("%d\n", a + b);
} else {
    if (op == '-') {
        printf("%d\n", a - b);
    } else {
        if (op == '*') {
            printf("%d\n", a * b);
        } else {
            if (op == '/') {
                printf("%d\n", a / b);
            } else {
                printf("unknown operator\n");
            }
        }
    }
}
```

看，是不是有点头晕？

所以省略花括号的规则还是很有用的。完全省略掉花括号就变成了： 

```c
if (op == '+') printf("%d\n", a + b);
else if (op == '-') printf("%d\n", a - b);
else if (op == '*') printf("%d\n", a * b);
else if (op == '/') printf("%d\n", a / b);
else printf("unknown operator\n");
```

是不是清晰多了？

### 复杂条件

`if`语句的条件可以不止是简单的比较判断，还可以用更复杂的表达式，
甚至调用函数，只要保证最后的值能够判断是`0`还是非`0`即可。
