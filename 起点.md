## 起点

站在起点，我看向地平线。 目力所及的天边，几座高峰隐约可见：

- 操作系统。这是编程行业的圣山珠穆朗玛。
- 嵌入式系统。基本上C语言一统天下。
- 数据库。SQLite、Redis等。
- 网络服务。
- 游戏引擎。
- UI。
- 编译器。
- 科学计算。

我的目标，是攀上每一座高峰，掌握整个C语言生态。

为什么每座高峰都要登上？是因为我的终极目标是创建一个新的语言（我把它叫做Z语言），并再造一个生态。

可走的路径太多了，应当如何选择呢？

我曾尝试咬定青山不放松，一条大道向天通，选定一个方向，闷头走下去。

直到撞到南墙.

每一座山峰，都不是轻而易举的征途。
越往上攀登，道路越陡峭，越崎岖。
越往上攀登，前人走过的也越少，找不到路标。
还会遇到突然的断路，完全无法翻越。

我卡在了半山腰。怎么办？

沉思已久，终于想通了：退一步海阔天空。

我可以先退回平地，打牢基础，先尝试其他的山峰。
那里也有同样美丽的风景，也会道路愈来越崎岖，也会撞上不可逾越的南墙。
但每一座山峰，在撞上南墙之前，我都可以领略更多的风光，并积攒更多的力量。
这样往返颠簸几轮，再回到第一座山峰，回到当初攀越不上的那块岩壁时，是不是就更有信心翻越他了？

也许每座山我都没有能够攀上峰顶，但每座山都能领略部分，我也能成为半个登山专家了吧？

就这样，我实践了“宽度优先搜索”。

不论是遍历千山，还是孤峰独攀，都需要脚踏实地。一步一个脚印。

每一步都探索新路，每一步都有所收获。

循序渐进，直到有足够能力，踏遍每一座山峰。


## 旅程规划

我个人的最终目标是攀上“编译器”这座高峰，用C语言开发一套新的语言，暂时叫做Z语言。

编程语言并不是孤立的，要做好它，一定要有配套的生态。
因此，要攀上这座高峰，我还得在以下几个方向上有所突破：

- 文本编辑器。Z语言需要配套的IDE，首先需要有个源码编辑器。我的目标是做一个类似VSCode的编辑器，再配合插件体系实现IDE的功能。
- 图形计算和UI。VScode这样的编辑器首先需要一个UI库来支持，而UI库又需要底层的图形库来支持。
- 数据结构和算法。编译器技术里涉及到不少独特的数据结构和算法，因此C语言的数据结构和算法功底也要打好。
- 汇编语言。编译器的后端输出几乎都是汇编，因此要想做好编译器，必须要有汇编语言的功底。C是最接近汇编的语言，学习C是如何编译成汇编的过程，是非常好的方法。
- 操作系统相关。编译器有很多地方需要和操作系统打交道，不论是生成可执行文件、动态链接、内存管理、IO操作、标准库，都需要操作系统底层的支持。而Linux就是C开发的，Linux的系统调用也都是C接口。很多适合学习的简单操作系统工程也都是C语言实现的。
- I/O和网络。Z语言的编译器目标是设计成一个真正的“语言服务器”（Language Server），不但提供传统的语法分析和高亮服务，还需要提供增量编译、解释执行、JIT、静态分析、语言翻译等功能，因此编译器自身就是一个网络服务。我必须掌握好C语言的I/O和网络相关技术。
- 数据库。Z语言编译器内部需要集成一个类似redis的内存数据库，用来管理编译器的内部状态和编译结果。如果未来需要做成编译器集群，还得实现分布式数据库。

而编译器技术本身，也有好几个阶段的规划：

- 先做一个最简的C编译器。
- 修改这个编译器的前端，实现Z的语法。这时，编译器可以同时支持C语言和Z语言的编译。这个程度的Z语言是一个子集，我称为ZC，其语言特性和C基本一致。
- 实现C和ZC的互相翻译。
- 将ZC编译器的源码由C翻译成ZC，这样ZC编译器就可以编译自身了。
- 扩展ZC编译器，实现超越C语言的更高阶的特性，如编译器执行、更好的内存管理、并发、类型系统等。

这就需要我学习很多C语言的编译器知识。

总结一下，这趟旅程需要在如下几个地点反复徘徊攀援：

- C语言平原。熟练掌握C语言的基础知识及配套工具。
- 编译器山峰。从最简单的C编译器开始，逐步学习：ChibiCC、LCC、TCC、Lua、Wren、QuickJS、CPython、Clang、GCC。
- 图形和UI山峰。基础的2D图形库：SDL、cairo等；UI库：Nuklear、raylib、GTK等；3D图形库：OpenGL、Vulkan、DirectX等。最终目标是实现一个自己的UI库。
- 数据结构与算法山峰。先掌握常用的数据结构和算法实现；再完成LeetCode的刷题之旅；最后学习一些编译器用到的数据结构和算法。
- 操作系统山峰。先学习语言和操作系统之间的关系，如可执行文件、系统调用、进程与线程机制等。再学习一些嵌入式内核的技术，如RTThread、FreeRTOS等。最后尝试掌握Linux内核的一些技术。
- 网络与I/O山峰。先学习Linux网络编程的基础，熟练掌握TCP/IP栈和HTTP等协议。再了解几个常见的网络或I/O库，如libuv、libevent等。最后自己实现一个网络库，供Z编译器使用。
- 数据库。从Redis开始，在学习SQLite，逐步实现一个简单的数据库。

具体什么时候走到哪里，现在还没有清晰的规划，走一步看一步吧。总之，脚踏实地，每一步都要打下坚实的基础。

先从C语言平原开始吧。
